{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checklist Antivirus</title>
</head>
<body>
  <div class="container">
    <div class="column"></div>
    <div class="column">
        <div class="text-center">
            <h3>Checklist Antivirus</h3>
            <form method="POST" action="{% url 'checklist_av' %}">
              {% csrf_token %}
              
              {% for field in form %}
                <div class="container py-3 mt-3">
                  <div class="row">
                    <div class="col-4 mx-auto">
                      <div class="form-check form-switch ps-0">
                        <!-- Convertimos el campo en un switch si es checkbox -->
                        <input class="form-check-input ms-auto mt-1" type="checkbox" 
                               id="{{ field.id_for_label }}" name="{{ field.name }}" 
                               {% if field.value %}checked{% endif %}>
                        <label class="form-check-label ms-2" for="{{ field.id_for_label }}">
                          {{ field.label }}
                        </label>
                      </div>
                      {% if field.errors %}
                        <div class="text-danger">
                          {% for error in field.errors %}
                              <p>{{ error }}</p>
                          {% endfor %}
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              {% endfor %}
              
              <div class="text-center">
                  <button type="submit" class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0">Guardar</button>
              </div>
          </form>

          <ul>
            {% for item in items %}
                <li>
                    <form method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="item_id" value="{{ item.id }}">
                        <input type="checkbox" name="completed" {% if item.completed %}checked{% endif %}>
                        <input type="text" name="name" value="{{ item.name }}">
                        <button type="submit">Update</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
        </div>        
    </div>
    <div class="column"></div>
</div>  
</body>
</html>
{% endblock %}